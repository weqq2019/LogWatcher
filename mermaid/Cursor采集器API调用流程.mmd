graph TD
    A[æ–°ç‰ˆæœ¬æ£€æµ‹åˆ°] --> B[ðŸ’° å¼€å§‹APIè°ƒç”¨æµç¨‹]
    B --> C[æ€»è®¡3æ¬¡APIè°ƒç”¨]
    
    C --> D[ç¬¬1æ¬¡: ç¿»è¯‘å†…å®¹]
    C --> E[ç¬¬2æ¬¡: ç¿»è¯‘æ ‡é¢˜]
    C --> F[ç¬¬3æ¬¡: åˆ†æžå†…å®¹]
    
    D --> G[_translate_content]
    G --> H[æž„å»ºç¿»è¯‘è¯·æ±‚]
    H --> I[å‘é€POSTè¯·æ±‚åˆ°DeepSeek API]
    I --> J[é‡è¯•æœºåˆ¶: æœ€å¤š3æ¬¡]
    J --> K[ç¿»è¯‘æˆåŠŸ?]
    K -->|æ˜¯| L[è¿”å›žç¿»è¯‘ç»“æžœ]
    K -->|å¦| M[âŒ ç¿»è¯‘å¤±è´¥]
    
    E --> N[_translate_title]
    N --> O[æž„å»ºæ ‡é¢˜ç¿»è¯‘è¯·æ±‚]
    O --> P[å‘é€POSTè¯·æ±‚åˆ°DeepSeek API]
    P --> Q[é‡è¯•æœºåˆ¶: æœ€å¤š2æ¬¡]
    Q --> R[ç¿»è¯‘æˆåŠŸ?]
    R -->|æ˜¯| S[è¿”å›žç¿»è¯‘æ ‡é¢˜]
    R -->|å¦| T[âŒ æ ‡é¢˜ç¿»è¯‘å¤±è´¥]
    
    F --> U[_analyze_with_deepseek]
    U --> V[æž„å»ºåˆ†æžè¯·æ±‚]
    V --> W[å‘é€POSTè¯·æ±‚åˆ°DeepSeek API]
    W --> X[é‡è¯•æœºåˆ¶: æœ€å¤š3æ¬¡]
    X --> Y[åˆ†æžæˆåŠŸ?]
    Y -->|æ˜¯| Z[è¿”å›žè¯¦ç»†åˆ†æžæŠ¥å‘Š]
    Y -->|å¦| AA[âŒ åˆ†æžå¤±è´¥]
    
    L --> BB[æ±‡æ€»APIç»“æžœ]
    S --> BB
    Z --> BB
    M --> BB
    T --> BB
    AA --> BB
    
    BB --> CC[åˆ›å»ºCollectorItemå¯¹è±¡]
    CC --> DD[åŒ…å«åŽŸæ–‡ã€è¯‘æ–‡ã€åˆ†æž]
    DD --> EE[æ ‡è®°ä¸ºæ–°ç‰ˆæœ¬]
    EE --> FF[æ·»åŠ åˆ°ç»“æžœåˆ—è¡¨]
    
    style A fill:#e1f5fe
    style B fill:#fff3e0
    style C fill:#ff8a65
    style BB fill:#e8f5e8
    style FF fill:#81c784
    
    classDef apiCall fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    classDef retry fill:#f3e5f5,stroke:#e91e63,stroke-width:2px
    classDef success fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef error fill:#ffebee,stroke:#f44336,stroke-width:2px
    
    class D,E,F apiCall
    class J,Q,X retry
    class L,S,Z,BB,FF success
    class M,T,AA error 