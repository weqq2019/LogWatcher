graph TD
    A[å¼€å§‹ - CursorCollector.collect] --> B[å‘é€HTTPè¯·æ±‚åˆ°Cursorç½‘ç«™]
    B --> C[èŽ·å–HTMLé¡µé¢å†…å®¹]
    C --> D[è§£æžHTMLèŽ·å–ç‰ˆæœ¬ä¿¡æ¯]
    D --> E[ä½¿ç”¨BeautifulSoupè§£æžç‰ˆæœ¬å·å’Œæ—¥æœŸ]
    E --> F[å¤šç­–ç•¥è§£æžç‰ˆæœ¬ä¿¡æ¯]
    
    F --> G[ç­–ç•¥1: ç‰ˆæœ¬å·-æ—¥æœŸåŒ¹é…]
    F --> H[ç­–ç•¥2: å®¹å™¨ç»“æž„è§£æž]
    F --> I[ç­–ç•¥3: æ¨¡å¼åŒ¹é…]
    F --> J[ç­–ç•¥4: å¤‡ç”¨æ•°æ®]
    
    G --> K[è§£æžæˆåŠŸ?]
    H --> K
    I --> K
    J --> K
    
    K -->|æ˜¯| L[éåŽ†æ¯ä¸ªç‰ˆæœ¬]
    K -->|å¦| M[ä½¿ç”¨å¤‡ç”¨ç‰ˆæœ¬æ•°æ®]
    M --> L
    
    L --> N[æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨æ­¤ç‰ˆæœ¬]
    N -->|å­˜åœ¨| O[è·³è¿‡APIè°ƒç”¨<br/>ä½¿ç”¨çŽ°æœ‰æ•°æ®]
    N -->|ä¸å­˜åœ¨| P[ðŸ’° æ–°ç‰ˆæœ¬éœ€è¦APIè°ƒç”¨]
    
    O --> Q[åˆ›å»ºCollectorItemå¯¹è±¡]
    P --> R[è°ƒç”¨DeepSeek APIç¿»è¯‘å†…å®¹]
    R --> S[è°ƒç”¨DeepSeek APIç¿»è¯‘æ ‡é¢˜]
    S --> T[è°ƒç”¨DeepSeek APIåˆ†æžå†…å®¹]
    T --> U[ç”Ÿæˆè¯¦ç»†åˆ†æžæŠ¥å‘Š]
    U --> Q
    
    Q --> V[æ·»åŠ åˆ°ç»“æžœåˆ—è¡¨]
    V --> W[æ‰€æœ‰ç‰ˆæœ¬å¤„ç†å®Œæˆ?]
    W -->|å¦| L
    W -->|æ˜¯| X[æŒ‰ç‰ˆæœ¬å·æŽ’åº]
    X --> Y[è¿”å›žé‡‡é›†ç»“æžœ]
    
    style A fill:#e1f5fe
    style P fill:#fff3e0
    style R fill:#f3e5f5
    style S fill:#f3e5f5
    style T fill:#f3e5f5
    style Y fill:#e8f5e8
    
    classDef apiCall fill:#ffecb3,stroke:#ff8f00,stroke-width:2px
    classDef database fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef parsing fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    
    class R,S,T apiCall
    class N,O database
    class D,E,F,G,H,I parsing 