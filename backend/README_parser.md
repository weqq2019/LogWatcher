# AI新闻收集器解析器使用指南

## 概述

AI新闻收集器解析器支持两种运行模式：
1. **测试模式**：使用本地保存的API响应数据进行测试
2. **API模式**：调用实际的远程API获取最新数据

## 使用方法

### 测试模式（推荐用于开发调试）

```bash
# 使用测试数据（默认模式）
python test_official_api.py

# 或者明确指定测试模式
python test_official_api.py --test
```

**优点**：
- 🚀 快速测试，无需网络请求
- 💰 不消耗API费用
- 🔧 适合调试解析器逻辑
- 📝 使用固定数据，结果可重复

### API模式（用于生产环境）

```bash
# 调用实际API
python test_official_api.py --api
```

**特点**：
- 🌐 获取最新的AI新闻数据
- 💸 消耗API调用费用
- ⏱️ 响应时间较长
- 🔄 数据实时更新

## 解析器功能

### 智能JSON解析

解析器具备强大的容错能力：

1. **标准JSON解析**：优先尝试直接解析JSON响应
2. **智能修复**：当JSON格式损坏时，自动尝试修复并提取内容
3. **详细错误提示**：提供清晰的错误信息和调试信息

### 测试数据源

测试数据保存在 `test_api_response.txt` 文件中，包含：
- 完整的API响应JSON
- 2025年7月19日的AI新闻数据
- 涵盖OpenAI、Anthropic、Google、xAI等主要玩家

## 输出示例

```bash
📝 使用测试模式：从本地文件读取数据
==================================================
解析成功！AI新闻内容:
==================================================
[AI新闻内容会在这里显示]
==================================================

✅ 解析器测试成功
```

## 开发工作流

### 1. 开发阶段

```bash
# 使用测试模式进行快速迭代
python test_official_api.py --test
```

### 2. 验证阶段

```bash
# 切换到API模式验证实际效果
python test_official_api.py --api
```

### 3. 更新测试数据

如需更新测试数据，可以：
1. 运行API模式获取最新数据
2. 将响应保存到 `test_api_response.txt`
3. 继续使用测试模式开发

## 故障排除

### JSON解析失败

如果遇到JSON解析错误：
1. 检查API响应格式是否正确
2. 解析器会自动尝试修复常见问题
3. 查看详细错误信息进行调试

### 文件未找到

如果测试文件缺失：
```bash
# 确保test_api_response.txt文件存在
ls test_api_response.txt
```

### API调用失败

如果API调用出错：
1. 检查网络连接
2. 验证API密钥配置
3. 确认API服务可用性

## 最佳实践

1. **开发时使用测试模式**：避免不必要的API消费
2. **发布前使用API模式**：确保与最新数据兼容
3. **定期更新测试数据**：保持测试的有效性
4. **监控解析错误**：及时发现和修复问题

---

**注意**：默认情况下工具使用测试模式，只有明确指定 `--api` 时才会调用实际API。